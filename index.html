<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Geo Quest Map</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; background: #000; }
        #map { width: 100%; height: 100vh; }
        .legend {
            position: absolute; bottom: 20px; left: 10px; z-index: 1000;
            background: rgba(0,0,0,0.8); color: white; padding: 10px;
            border-radius: 10px; font-family: sans-serif; font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="legend">
        üî¥ –ñ–∞–Ω–∞—Ä—Ç–∞—É–ª–∞—Ä | üîµ –®“±“£“ì—ã–º–∞–ª–∞—Ä | üü¢ –®—ã“£–¥–∞—Ä | üü° –ë“±“ì–∞–∑–¥–∞—Ä/–ö–∞–Ω–∞–ª–¥–∞—Ä
    </div>
    <div id="map"></div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        var map = L.map('map', { zoomControl: false }).setView([20, 0], 2);

        L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}').addTo(map);

        // “ö—ã–∑—ã“õ—Ç—ã –Ω“Ø–∫—Ç–µ–ª–µ—Ä –±–∞–∑–∞—Å—ã
        const points = [
            { name: "–ú–∞—Ä–∏–∞–Ω —à“±“£“ì—ã–º–∞—Å—ã", coords: [11.3493, 142.1996], color: "blue" },
            { name: "–≠–≤–µ—Ä–µ—Å—Ç —à—ã“£—ã", coords: [27.9881, 86.9250], color: "green" },
            { name: "–ö–∏–ª–∏–º–∞–Ω–¥–∂–∞—Ä–æ –∂–∞–Ω–∞—Ä—Ç–∞—É—ã", coords: [-3.0674, 37.3556], color: "red" },
            { name: "–ü–∞–Ω–∞–º–∞ –∫–∞–Ω–∞–ª—ã", coords: [9.1899, -79.8478], color: "yellow" },
            { name: "–°—É—ç—Ü –∫–∞–Ω–∞–ª—ã", coords: [30.5852, 32.2654], color: "yellow" },
            { name: "–ì–∏–±—Ä–∞–ª—Ç–∞—Ä –±“±“ì–∞–∑—ã", coords: [35.9375, -5.4627], color: "yellow" },
            { name: "–ë–∞–π–∫–∞–ª –∫”©–ª—ñ", coords: [53.5587, 108.1650], color: "blue" },
            { name: "–í–µ–∑—É–≤–∏–π –∂–∞–Ω–∞—Ä—Ç–∞—É—ã", coords: [40.8167, 14.4289], color: "red" },
            { name: "–ê–º–∞–∑–æ–Ω–∫–∞ ”©–∑–µ–Ω—ñ", coords: [-3.4653, -62.2159], color: "blue" },
            { name: "–°–∞—Ö–∞—Ä–∞ —à”©–ª—ñ", coords: [23.4162, 25.6627], color: "orange" }
        ];

        // –ù“Ø–∫—Ç–µ–ª–µ—Ä–¥—ñ –∫–∞—Ä—Ç–∞“ì–∞ —à—ã“ì–∞—Ä—É
        points.forEach(point => {
            let marker = L.circleMarker(point.coords, {
                radius: 8,
                fillColor: point.color,
                color: "#fff",
                weight: 2,
                opacity: 1,
                fillOpacity: 0.8
            }).addTo(map);

            marker.on('click', function() {
                tg.sendData(point.name);
            });
        });

        // –ö–µ–∑ –∫–µ–ª–≥–µ–Ω –±–∞—Å“õ–∞ –Ω“Ø–∫—Ç–µ–Ω—ñ –±–∞—Å“õ–∞–Ω–¥–∞
        map.on('click', function(e) {
            let lat = e.latlng.lat.toFixed(4);
            let lng = e.latlng.lng.toFixed(4);
            tg.sendData(`–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞: ${lat}, ${lng}`);
        });
    </script>
</body>
</html>
